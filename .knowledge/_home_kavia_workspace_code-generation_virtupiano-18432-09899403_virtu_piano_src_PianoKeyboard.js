{"is_source_file": true, "format": "JavaScript (React)", "description": "This file defines a React component called `PianoKeyboard` that renders a visual piano keyboard with interactive white and black keys. It handles keyboard and pointer events to play corresponding musical notes, converts note names to frequencies, and integrates a simple synthesizer for audio playback. The file also exports a map of key-to-note mappings as its public interface.", "external_files": ["./PianoKeyboard.css"], "external_methods": ["noteNameToMidi", "noteToFrequency", "useSynth", "getNoteIndexFromKey", "codeToKeyChar"], "published": ["KEYBOARD_NOTE_MAP"], "classes": [], "methods": [{"name": "noteNameToMidi(note)", "description": "Converts a note name (e.g., 'C4', 'A#4') into its corresponding MIDI number.", "scope": "", "scopeKind": ""}, {"name": "noteToFrequency(note)", "description": "Calculates the frequency in Hz for a given note string, assuming A4 = 440Hz tuning.", "scope": "", "scopeKind": ""}, {"name": "useSynth()", "description": "A React hook that manages oscillators for playing and stopping notes using the Web Audio API.", "scope": "", "scopeKind": ""}, {"name": "getNoteIndexFromKey(key)", "description": "Maps a keyboard input key (e.g., 'Q', '2') to an index in the `KEYBOARD_NOTE_MAP`. Case-insensitive.", "scope": "", "scopeKind": ""}, {"name": "codeToKeyChar", "description": "Extracts the character representation of a keyboard event code, e.g., 'KeyQ' -> 'Q'."}, {"name": "getCtx()", "scope": "useSynth", "scopeKind": "function", "description": "unavailable"}, {"name": "play(note)", "scope": "useSynth", "scopeKind": "function", "description": "unavailable"}, {"name": "stop(note)", "scope": "useSynth", "scopeKind": "function", "description": "unavailable"}], "calls": ["noteNameToMidi", "noteToFrequency", "useSynth().play", "useSynth().stop", "getNoteIndexFromKey", "codeToKeyChar"], "search-terms": ["PianoKeyboard", "keyMapping", "audio synthesis", "react keyboard interaction", "virtual piano", "black and white keys", "note to frequency", "React useCallback", "CSS positioning for piano keys"], "state": 2, "file_id": 18, "knowledge_revision": 43, "git_revision": "3cd868fd1b553672e9d2f3621b6962095c7ec702", "revision_history": [{"37": "11a79c5aa2fb375184459e9397b4e9c1415df967"}, {"43": "3cd868fd1b553672e9d2f3621b6962095c7ec702"}], "ctags": [{"_type": "tag", "name": "KEYBOARD_NOTE_MAP", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^export const KEYBOARD_NOTE_MAP = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PianoKeyboard", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^const PianoKeyboard = ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "blackKeyPositions", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const blackKeyPositions = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "codeToKeyChar", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^const codeToKeyChar = (code) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCtx", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  function getCtx() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "useSynth", "scopeKind": "function"}, {"_type": "tag", "name": "getNoteIndexFromKey", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^function getNoteIndexFromKey(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "handleGlobalPointerUp", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const handleGlobalPointerUp = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleKeyDown", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const handleKeyDown = useCallback($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleKeyUp", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const handleKeyUp = useCallback($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handlePointerDown", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const handlePointerDown = (idx) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handlePointerUp", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const handlePointerUp = (idx) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "noteNameToMidi", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^function noteNameToMidi(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "noteToFrequency", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^function noteToFrequency(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "onNoteDown", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  onNoteDown, \\/\\/ function(note, index)$/", "language": "JavaScript", "kind": "field", "scope": "PianoKeyboard", "scopeKind": "class"}, {"_type": "tag", "name": "play", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  function play(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)", "scope": "useSynth", "scopeKind": "function"}, {"_type": "tag", "name": "setActiveKeys", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const [activeKeys, setActiveKeys] = useState(new Set());$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "stop", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  function stop(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)", "scope": "useSynth", "scopeKind": "function"}, {"_type": "tag", "name": "useSynth", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^function useSynth() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "whiteKeys", "path": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "pattern": "/^  const whiteKeys = KEYBOARD_NOTE_MAP$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/virtupiano-18432-09899403/virtu_piano/src/PianoKeyboard.js", "hash": "3aee650b449cda393deb38fc27935073", "format-version": 4, "code-base-name": "default", "fields": [{"name": "onNoteDown, \\/\\/ function(note, index)", "scope": "PianoKeyboard", "scopeKind": "class", "description": "unavailable"}]}